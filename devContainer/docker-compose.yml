services:
  dev:
    build: .
    image: dev-container:latest
    volumes:
      - ../:/workspace
      - ~/.ssh:/home/dev/.ssh:ro
      - nix-store:/nix
    env_file:
      - ../.env
    environment:
      - GIT_USER_NAME=${GIT_USER_NAME:-}
      - GIT_USER_EMAIL=${GIT_USER_EMAIL:-}
    stdin_open: true
    tty: true
    network_mode: host

volumes:
  nix-store:
